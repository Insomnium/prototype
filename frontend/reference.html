<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Application</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            display: flex;
            height: 100vh;
            background-color: #f0f2f5;
        }

        /* Contact List Styles */
        .contact-list {
            width: 1000px;
            background-color: #fff;
            border-right: 1px solid #e0e0e0;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .contact-list-header {
            padding: 20px;
            background-color: #f5f5f5;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .contact-list-header h2 {
            color: #333;
            font-size: 24px;
        }

        .search-container {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            font-size: 14px;
            outline: none;
        }

        .search-input:focus {
            border-color: #0084ff;
        }

        .contacts-container {
            flex: 1;
            overflow-y: auto;
            padding: 10px 0;
        }

        .contact {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            cursor: pointer;
            transition: background-color 0.2s;
            border-bottom: 1px solid #f0f0f0;
        }

        .contact:hover {
            background-color: #f5f5f5;
        }

        .contact.active {
            background-color: #e9f3ff;
        }

        .contact-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #ddd;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #666;
        }

        .contact-info {
            flex: 1;
        }

        .contact-name {
            font-weight: 600;
            font-size: 16px;
            color: #333;
            margin-bottom: 5px;
        }

        .contact-last-message {
            font-size: 14px;
            color: #777;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 800px;
        }

        .contact-time {
            font-size: 12px;
            color: #999;
            margin-left: 10px;
        }

        /* Chat Window Styles */
        .chat-window {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: #fff;
        }

        .chat-header {
            padding: 20px;
            background-color: #f5f5f5;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
        }

        .chat-header-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #ddd;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #666;
        }

        .chat-header-info h3 {
            font-size: 18px;
            color: #333;
            margin-bottom: 5px;
        }

        .chat-header-info p {
            font-size: 14px;
            color: #777;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .message {
            max-width: 70%;
            padding: 12px 16px;
            margin-bottom: 15px;
            border-radius: 18px;
            position: relative;
            word-wrap: break-word;
        }

        .message.received {
            align-self: flex-start;
            background-color: #f0f0f0;
            border-top-left-radius: 5px;
        }

        .message.sent {
            align-self: flex-end;
            background-color: #0084ff;
            color: white;
            border-top-right-radius: 5px;
        }

        .message-time {
            font-size: 11px;
            margin-top: 5px;
            opacity: 0.7;
            text-align: right;
        }

        .chat-input-container {
            padding: 20px;
            border-top: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 24px;
            font-size: 14px;
            outline: none;
            resize: none;
            max-height: 120px;
        }

        .chat-input:focus {
            border-color: #0084ff;
        }

        .send-button {
            background-color: #0084ff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }

        .send-button:hover {
            background-color: #0073e6;
        }

        .send-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body>
<!-- Contact List Section -->
<div class="contact-list">
    <div class="contact-list-header">
        <h2>Chats</h2>
        <button id="new-chat-btn">New Chat</button>
    </div>

    <div class="search-container">
        <input type="text" class="search-input" placeholder="Search contacts...">
    </div>

    <div class="contacts-container" id="contacts-container">
        <!-- Contacts will be populated by JavaScript -->
    </div>
</div>

<!-- Chat Window Section -->
<div class="chat-window">
    <div class="chat-header">
        <div class="chat-header-avatar" id="current-contact-avatar">JD</div>
        <div class="chat-header-info">
            <h3 id="current-contact-name">Select a contact to start chatting</h3>
            <p id="current-contact-status">Online</p>
        </div>
    </div>

    <div class="chat-messages" id="chat-messages">
        <!-- Messages will be populated by JavaScript -->
        <div class="welcome-message">
            <p>Select a contact from the list to view your conversation</p>
        </div>
    </div>

    <div class="chat-input-container">
        <textarea class="chat-input" id="message-input" placeholder="Type a message..." rows="1"></textarea>
        <button class="send-button" id="send-button" disabled>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
    </div>
</div>

<script>
    // Sample data for contacts and messages
    const contacts = [
        { id: 1, name: "John Doe", lastMessage: "Hey, how are you?", time: "10:30 AM", avatar: "JD", status: "Online" },
        { id: 2, name: "Jane Smith", lastMessage: "Can we meet tomorrow?", time: "Yesterday", avatar: "JS", status: "Online" },
        { id: 3, name: "Robert Johnson", lastMessage: "I sent you the files", time: "Monday", avatar: "RJ", status: "Away" },
        { id: 4, name: "Emily Davis", lastMessage: "Thanks for your help!", time: "Sunday", avatar: "ED", status: "Offline" },
        { id: 5, name: "Michael Wilson", lastMessage: "Let's schedule a call", time: "Last week", avatar: "MW", status: "Online" },
        { id: 6, name: "Sarah Brown", lastMessage: "The meeting is at 3 PM", time: "Last week", avatar: "SB", status: "Away" },
        { id: 7, name: "David Miller", lastMessage: "Check out this article", time: "2 weeks ago", avatar: "DM", status: "Offline" },
        { id: 8, name: "Lisa Taylor", lastMessage: "Happy birthday!", time: "3 weeks ago", avatar: "LT", status: "Online" },
        { id: 9, name: "James Anderson", lastMessage: "See you soon!", time: "1 month ago", avatar: "JA", status: "Offline" },
        { id: 10, name: "Jennifer Thomas", lastMessage: "I'll get back to you", time: "2 months ago", avatar: "JT", status: "Away" }
    ];

    // Sample messages for each contact
    const messages = {
        1: [
            { text: "Hey there!", time: "10:15 AM", sender: "contact" },
            { text: "Hi! How are you?", time: "10:16 AM", sender: "user" },
            { text: "I'm good, thanks! Just working on the project.", time: "10:20 AM", sender: "contact" },
            { text: "That's great! How's it going?", time: "10:22 AM", sender: "user" },
            { text: "Pretty well, almost finished with the first phase.", time: "10:25 AM", sender: "contact" },
            { text: "Awesome! Can't wait to see it.", time: "10:30 AM", sender: "user" }
        ],
        2: [
            { text: "Hi, are we still meeting tomorrow?", time: "09:45 AM", sender: "contact" },
            { text: "Yes, definitely! 2 PM at the usual place?", time: "09:50 AM", sender: "user" },
            { text: "Perfect, see you then!", time: "09:52 AM", sender: "contact" }
        ],
        3: [
            { text: "I've sent the files to your email.", time: "03:20 PM", sender: "contact" },
            { text: "Got them, thanks! I'll review them today.", time: "03:25 PM", sender: "user" }
        ]
    };

    // DOM elements
    const contactsContainer = document.getElementById('contacts-container');
    const chatMessages = document.getElementById('chat-messages');
    const messageInput = document.getElementById('message-input');
    const sendButton = document.getElementById('send-button');
    const currentContactName = document.getElementById('current-contact-name');
    const currentContactAvatar = document.getElementById('current-contact-avatar');
    const currentContactStatus = document.getElementById('current-contact-status');
    const searchInput = document.querySelector('.search-input');

    let currentContactId = null;

    // Initialize the contact list
    function initializeContacts() {
        contactsContainer.innerHTML = '';
        contacts.forEach(contact => {
            const contactElement = document.createElement('div');
            contactElement.className = 'contact';
            contactElement.dataset.id = contact.id;

            contactElement.innerHTML = `
                    <div class="contact-avatar">${contact.avatar}</div>
                    <div class="contact-info">
                        <div class="contact-name">${contact.name}</div>
                        <div class="contact-last-message">${contact.lastMessage}</div>
                    </div>
                    <div class="contact-time">${contact.time}</div>
                `;

            contactElement.addEventListener('click', () => selectContact(contact.id));
            contactsContainer.appendChild(contactElement);
        });
    }

    // Select a contact and display their messages
    function selectContact(contactId) {
        currentContactId = contactId;

        // Update active state in contact list
        document.querySelectorAll('.contact').forEach(contact => {
            contact.classList.remove('active');
            if (contact.dataset.id == contactId) {
                contact.classList.add('active');
            }
        });

        // Update chat header
        const contact = contacts.find(c => c.id == contactId);
        currentContactName.textContent = contact.name;
        currentContactAvatar.textContent = contact.avatar;
        currentContactStatus.textContent = contact.status;

        // Display messages
        displayMessages(contactId);

        // Enable message input
        messageInput.disabled = false;
        sendButton.disabled = messageInput.value.trim() === '';
    }

    // Display messages for the selected contact
    function displayMessages(contactId) {
        chatMessages.innerHTML = '';

        const contactMessages = messages[contactId] || [];

        if (contactMessages.length === 0) {
            const welcomeMsg = document.createElement('div');
            welcomeMsg.className = 'welcome-message';
            welcomeMsg.innerHTML = '<p>No messages yet. Start a conversation!</p>';
            chatMessages.appendChild(welcomeMsg);
        } else {
            contactMessages.forEach(msg => {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${msg.sender === 'user' ? 'sent' : 'received'}`;

                messageElement.innerHTML = `
                        <div class="message-text">${msg.text}</div>
                        <div class="message-time">${msg.time}</div>
                    `;

                chatMessages.appendChild(messageElement);
            });
        }

        // Scroll to bottom of messages
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Send a new message
    function sendMessage() {
        const text = messageInput.value.trim();
        if (!text || !currentContactId) return;

        // Create new message object
        const now = new Date();
        const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

        const newMessage = {
            text: text,
            time: timeString,
            sender: 'user'
        };

        // Add to messages data
        if (!messages[currentContactId]) {
            messages[currentContactId] = [];
        }
        messages[currentContactId].push(newMessage);

        // Update contact's last message and time
        const contact = contacts.find(c => c.id == currentContactId);
        contact.lastMessage = text;
        contact.time = timeString;

        // Update UI
        displayMessages(currentContactId);
        updateContactList();

        // Clear input
        messageInput.value = '';
        sendButton.disabled = true;

        // Simulate a reply after a short delay
        setTimeout(() => {
            simulateReply(currentContactId);
        }, 1000 + Math.random() * 2000);
    }

    // Simulate a reply from the contact
    function simulateReply(contactId) {
        const replies = [
            "Thanks for your message!",
            "I'll get back to you soon.",
            "That's interesting!",
            "Let me think about that.",
            "Can we discuss this later?",
            "I agree with you.",
            "That sounds good to me."
        ];

        const randomReply = replies[Math.floor(Math.random() * replies.length)];
        const now = new Date();
        const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

        const replyMessage = {
            text: randomReply,
            time: timeString,
            sender: 'contact'
        };

        messages[contactId].push(replyMessage);

        // Update contact's last message and time
        const contact = contacts.find(c => c.id == contactId);
        contact.lastMessage = randomReply;
        contact.time = timeString;

        // Update UI if this contact is currently selected
        if (currentContactId == contactId) {
            displayMessages(contactId);
        }

        updateContactList();
    }

    // Update the contact list with new last messages and times
    function updateContactList() {
        document.querySelectorAll('.contact').forEach(contactElement => {
            const contactId = contactElement.dataset.id;
            const contact = contacts.find(c => c.id == contactId);

            if (contact) {
                const lastMessageEl = contactElement.querySelector('.contact-last-message');
                const timeEl = contactElement.querySelector('.contact-time');

                lastMessageEl.textContent = contact.lastMessage;
                timeEl.textContent = contact.time;
            }
        });
    }

    // Filter contacts based on search input
    function filterContacts() {
        const searchTerm = searchInput.value.toLowerCase();

        document.querySelectorAll('.contact').forEach(contact => {
            const name = contact.querySelector('.contact-name').textContent.toLowerCase();
            const lastMessage = contact.querySelector('.contact-last-message').textContent.toLowerCase();

            if (name.includes(searchTerm) || lastMessage.includes(searchTerm)) {
                contact.style.display = 'flex';
            } else {
                contact.style.display = 'none';
            }
        });
    }

    // Event listeners
    messageInput.addEventListener('input', function() {
        sendButton.disabled = this.value.trim() === '';

        // Auto-resize textarea
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
    });

    messageInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
        }
    });

    sendButton.addEventListener('click', sendMessage);

    searchInput.addEventListener('input', filterContacts);

    // Initialize the application
    initializeContacts();
</script>
</body>
</html>
